#:kivy 1.0.9

#:import label kivy.uix.label
#:import sla kivy.adapters.simplelistadapter
#:import c controller
#:import gui gui

<SaneLabel>:
    size_hint_y: None
    text_size: self.width, None

<LogEntry>:
    font_name: 'DroidSansMono'


<MenuView>:
    orientation: 'vertical'
    spacing: 10
    Button:
        size_hint: (1, 0.1)
        text: 'Clear screen'
        on_press: c.get.clear_logs()
    Button:
        size_hint: (1, 0.1)
        text: 'Ping'
        on_press: c.get.send_ping()
    Button:
        size_hint: (1, 0.1)
        text: 'Cron stats'
        on_press: c.get.cron_stats()
    Button:
        size_hint: (1, 0.1)
        text: 'Probe memory'
        on_press: c.get.get_memory()
    Button:
        size_hint: (1, 0.1)
        text: 'Reboot'
        on_press: c.get.reset_pic()
    Label:

<IndicatorView>
    orientation: 'horizontal'
    spacing:0
    Label:
    SaneLabel:
        size_hint: (0.2, 1)

        text: self.parent.inbound_traffic_text
    SaneLabel:
        size_hint: (0.2, 1)
        text: self.parent.outbound_traffic_text


<LogsView>:
    logs_list: id_logs_list

    ListView:
        id: id_logs_list
        adapter:
            sla.SimpleListAdapter(
            data=[],
            cls=gui.LogEntry)

<RootView>:
    debug_panel: id_debug_panel
    settings: id_settings

    do_default_tab: False
    TabbedPanelItem:
        text: "Debug"
        DebugView:
            id: id_debug_panel
    TabbedPanelItem:
        text: "Settings"
        SettingsView:
            id: id_settings


<SettingsView>:
    orientation: 'vertical'
    BoxLayout:
        size_hint: (1, 0.1)
        orientation: 'horizontal'
        TextInput:
            size_hint: (0.5, 1)
            padding_y: ( self.height - self.line_height ) / 2
            hint_text: 'Loading...'
            disabled: True
            text: self.parent.parent.box_time
            multiline: False
            readonly: True
            font_size: '20sp'
        Button:

            size_hint: (0.5, 1)
            text:'Sync time with Computer'
            on_press: c.get.sync_time()
    Label:

<DebugView>:
    logs: id_logs.logs_list
    indicators: id_indicators
    orientation: 'horizontal'
    spacing: 10

    MenuView:
        size_hint: (.35,1)
        id: id_menu

    BoxLayout:
        size_hint: (.65,1)
        orientation: 'vertical'
        LogsView:
            size_hint: (1, 0.9)
            id: id_logs

        IndicatorView:
            size_hint: (1, 0.1)
            id: id_indicators


